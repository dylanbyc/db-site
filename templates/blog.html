{% extends "layout.html" %}

{% block content %}
<article>
  <h1>{{ this.title }}</h1>

  {% if this.body %}
  <div class="content blog-intro">
    {{ this.body }}
  </div>
  {% endif %}

  <div class="post-cards">
    {% for post in this.children %}
    <a href="{{ post|url }}" class="post-card">
      <div class="post-card-header">
        <h2 class="post-card-title">{{ post.title }}</h2>
        <div class="post-card-meta">
          <time datetime="{{ post.pub_date }}">{{ post.pub_date|dateformat('long') }}</time>
          {% if post.author %}
          <span class="post-card-author">by {{ post.author }}</span>
          {% endif %}
          {% set words = post.body.source|wordcount %}
          <span class="post-card-reading-time">{{ words }} words, ~{{ (words / 200)|round(0, 'ceil')|int }} min read</span>
        </div>
      </div>

      {% if post.summary %}
      <p class="post-card-summary">{{ post.summary }}</p>
      {% endif %}

      {% if post.categories %}
      <div class="post-card-categories">
        {% for category in post.categories %}
        <span class="category">{{ category }}</span>
        {% endfor %}
      </div>
      {% endif %}

      <span class="post-card-readmore">Read on &rarr;</span>
    </a>
    {% endfor %}
  </div>
</article>
{% endblock %}
